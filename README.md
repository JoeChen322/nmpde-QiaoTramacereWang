# Simple README

## Compiling

To build the executable, make sure you have loaded the needed modules with

```bash
module load gcc-glibc dealii
```

Then run the following commands:

```bash
mkdir build
cd build
cmake ..
make
```

The executable will be created into `build`, and can be executed through

```bash
./executable-name
```

## Some common parameters

We set the parameters as follows:

- `f = 0.0`
- `mu = 1.0`
- `initial condition: u(x,0) = sin(m*pi*x)*sin(n* pi*y); u'(x,0) = 0`
- `domain: [0,1]x[0,1]`
- `boundary condition: homogeneous Dirichlet`
- `meshes: square meshes generated by Gmsh with N divisions on each side`
- `polynomial degree: 1`

## More tests results and commands to run

The commands to run the various tests and scripts are as follows:

- `generate_square_meshes_by_N.py`: To use it we need to input the value N which is the number of divisions on each side of the square. It will generate a mesh file named `mesh-square-N.msh` in the `mesh` folder. To run it, use the following command:

  ```bash
  python3 generate_square_meshes_by_N.py --out-dir ../meshes --Ns 8 16 32 64 128
  ```

- `TimeConvergence.cpp`: To run the time convergence test, use the following command:

  ```bash
  mpirun -np 8 ./TimeConvergence ../meshes/mesh-square-400.msh 1 1.0 0.5 0.1 5
  ## mpirun -np 8 ./TimeConvergence (with default args)
  ```

  The input arguments are: `mesh_file degree T theta initial_deltat num_refinements`. The output is written to the `results/convergence` folder.

- `SpaceConvergence.cpp`: To run the space convergence test, use the following command:

  ```bash
  mpirun -np 8 ./SpaceConvergence ../meshes mesh-square 1 0.75 0.5 0.001 4 8 16 32 64 128
  ## mpirun -np 8 ./SpaceConvergence (with default args)
  ```

  The input arguments are: `mesh_dir mesh_base_name degree T theta deltat Ns...`. The output is written to the `results/convergence` folder.

- `DissipationStudy.cpp`: To run the dissipation study, use the following command:

  ```bash
  mpirun -np 8 ./DissipationStudy ../meshes/mesh-square-64.msh 1 10.0 10
  ## mpirun -np 8 ./DissipationStudy (with default args)
  ```

  The input arguments are: `mesh_file degree T stride`. The output is written to the `results/dissipation` folder.

- `DispersionOmegaDtStudy.cpp`: To run the dispersion study, use the following command:

  ```bash
  mpirun -np 8 ./DispersionOmegaDtStudy ../meshes/mesh-square-64.msh 1 10.0 10
  ## mpirun -np 8 ./DispersionOmegaDtStudy (with default args)
  ```

  The input arguments are: `mesh_file degree T stride`. The output is written to the `results/dispersion` folder.
  
- `DispersionSpatialStudy.cpp`: To run the dissipation study, use the following command:

  ```bash
  mpirun -np 8 ./DispersionSpatialStudy ../meshes mesh-square 1 10.0 0.001 1 1 8 16 32 64 
  ## mpirun -np 8 ./DispersionSpatialStudy (with default args)
  ```

  The input arguments are: `mesh_dir mesh_base_name degree T deltat m n Ns...`. The output is written to the `results/dispersion` folder.

- `plot_time_convergence.py`: To plot the time convergence results, use the following command:

  ```bash
  python3 plot_time_convergence.py --csv ../results/convergence/time_convergence.csv --out ../results/plots/time_convergence.png
  ```

- `plot_space_convergence.py`: To plot the space convergence results, use the following command:

  ```bash
  python3 plot_space_convergence.py --csv ../results/convergence/space_convergence.csv --out ../results/plots/space_convergence.png
  ```

- `plot_dissipation.py`: To plot the dissipation results, use the following command:

  ```bash
  python3 plot_dissipation.py
  ```

  This will read the summary CSV file from `results/dissipation/dispersion_summary.csv` and save the plots to `results/plots`.

- `plot_dispersion_time.py`: To plot the dispersion results, use the following command:

  ```bash
  python3 plot_dispersion_time.py
  ```

  This will read the summary CSV file from `results/dispersion/dispersion_summary.csv` and save the plots to `results/plots`.

- `plot_dispersion_space.py`: To plot the dispersion spatial results, use the following command:

  ```bash
  python3 plot_dispersion_space.py
  ```

  This will read the summary CSV file from `results/dispersion/dispersion_spatial.csv` and save the plots to `results/plots`.

## Notes
